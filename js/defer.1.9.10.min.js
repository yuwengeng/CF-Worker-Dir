new Vue({
    el: "#submit",
    methods: {
        search_send() {
            let e = $("#search"),
                t = e.val().trim();
            t ? ($(".web-menu button").eq(0).addClass("active").siblings().removeClass("active"), $(".group-video").html('B站博主<a href="https://space.bilibili.com/125526/" target="_blank"> -LKs- </a>《良心到难以置信的网站推荐》'), "block" === $(".bilibili_iframe").css("display") && ($(".bilibili_iframe").css("display", "none"), $("iframe").attr("src", "")), $(".web-list .web-grid").each(function() {
                -1 == ($(this).find(".web-single h2").text() + $(this).find(".web-single p").text()).toUpperCase().search(t.toUpperCase()) && -1 == $(this).find(".web-single").attr("data-content").toUpperCase().search(t.toUpperCase()) || $(this).addClass("filter_web")
            }), $(".web-list").isotope({
                itemSelector: ".web-grid",
                filter: ".filter_web"
            }), setTimeout(() => {
                set_footer(), $(".web-list .web-grid").removeClass("filter_web")
            }, 10)) : ($(".el-message__closeBtn").click(), this.$message({
                message: "请输入关键词",
                type: "info",
                center: !0,
                offset: -1,
                showClose: !0
            })), e.val("")
        }
    }
}), $("#search").keydown(e => {
    13 === e.keyCode && $("#submit").click()
});
let $href = $("#recipient-name"),
    $content = $("#message-text");
new Vue({
    el: "#send_msg",
    data: () => ({
        send_flag: !0
    }),
    // 推荐网站
    methods: {
        send() {
            let e = $("#send_msg"),
                t = $href.val().trim(),
                s = $content.val().trim(),
                a = t.length,
                i = s.length;
            this.send_flag = !0, s || t ? t ? s || ($content.val(""), this.ele_message("请输入网站简介", "info")) : ($href.val(""), this.ele_message("请输入链接", "info")) : ($href.val(""), $content.val(""), this.ele_message("请输入链接、网站简介", "info")), a > 256 ? this.ele_message("链接太长了，已超出256个字符的限制", "warning") : i > 256 && this.ele_message(`你一共写了${i}个字，已超出256个字符的限制`, "warning");
            this.send_flag && (e.attr("disabled", !0), e.addClass("send_disabled"), $.ajax({
                type: "POST",
                dataType: "text",
                url: "https://api.lks.helloxjn.com/api/web_reveive",
                data: {
                    href: t,
                    content: s,
                    ip: "0.0.0.0"
                },
                error: t => {
                    e.attr("disabled", !1), e.removeClass("send_disabled"), 429 == t.status ? this.$notify({
                        title: "发送失败",
                        message: "发送频率过高，请稍后再试！",
                        type: "warning",
                        center: !0
                    }) : this.$notify({
                        title: "发送失败",
                        message: "服务器在摸鱼！",
                        type: "error",
                        center: !0
                    })
                },
                success: t => {
                    e.attr("disabled", !1), e.removeClass("send_disabled"), 1040 == (t = $.parseJSON(t)).code ? this.$notify({
                        title: "发送失败",
                        message: "你的请求已被过滤 (￣^￣)ゞ",
                        type: "error",
                        center: !0
                    }) : 1e3 == t.code && ($href.val(""), $content.val(""), this.$notify({
                        title: "已发送",
                        message: "感谢分享 (゜-゜)つロ",
                        type: "success",
                        center: !0
                    }))
                }
            }))
        },
        ele_message(e, t) {
            this.send_flag = !1, $(".el-message__closeBtn").click(), this.$message({
                message: e,
                type: t,
                center: !0,
                offset: -1,
                showClose: !0
            })
        }
    }
}), $href.keydown(e => {
    if (13 === e.keyCode) return $content.focus(), !1
}), $('[data-toggle="popover"]').popover({
    container: "body",
    content: "暂无简介",
    placement: "top",
    trigger: "hover"
}), setTimeout(() => {
    $.ajax({
        type: "POST",
        url: "https://api.lks.helloxjn.com/share/v1/log/",
        data: {
            web: "lks"
        }
    })
}, 2e3), $("#Disclaimer .modal-body").html('<p>*本网站由<a href="https://space.bilibili.com/125526/" rel="nofollow noreferrer" target="_blank">LKs</a>和<a href="https://github.com/xiangjianan/" rel="nofollow noreferrer" target="_blank">xiang9872</a>共同制作，展示的所有网站均为个人兴趣收集，不含任何商业推广成分，仅供交流学习。如有网站违反国家政策法规或链接已失效请联系(<a href="mailto:xiang9872@126.com">xiang9872@126.com</a>)，我们会尽快修改。</p>'), localStorage.getItem("is_show_disclaimer") || localStorage.setItem("is_show_disclaimer", 1), 1 == localStorage.getItem("is_show_disclaimer") && setTimeout(() => {
    $("#clickDisclaimer").click()
}, 300), $("#DisclaimerClose").click(() => {
    localStorage.setItem("is_show_disclaimer", 0)
});